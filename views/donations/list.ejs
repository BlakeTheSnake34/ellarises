<!DOCTYPE html>
<html>
<head>
  <title><%= title %></title>
  <link rel="stylesheet" href="/css/main.css">
</head>
<body>

  <%- include('../partials/_nav') %>
  <%- include('../partials/_flash') %>

  <h1>All Donations</h1>

  <a href="/donations/new" class="btn">Record New Donation</a>

  <table>
    <thead>
      <tr>
        <th>Donor Email</th>
        <th>Name</th>
        <th>Date</th>
        <th>Amount</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <% donations.forEach(d => { %>
        <tr>
          <td><%= d.email %></td>
          <td><%= d.first_name %> <%= d.last_name %></td>

          <td>
            <%= d.date
                ? d.date.toISOString().slice(0, 10)
                : "No Date"
            %>
          </td>

          <td>$<%= d.amount %></td>

          <td>
            <a href="/donations/<%= d.id %>/edit">Edit</a>

            <form action="/donations/<%= d.id %>/delete" method="POST" style="display:inline;">
              <button type="submit" onclick="return confirm('Are you sure?')">
                Delete
              </button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>

</body>
</html>
